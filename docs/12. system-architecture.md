
# 📦 Tackle Box 전체 시스템 아키텍처 & 인프라 구성

이 문서는 Tackle Box 프로젝트의 전체 시스템 아키텍처와 인프라 구성, CI/CD 흐름 등을 간단한 다이어그램으로 정리한 문서입니다.

---

## 1. 전체 시스템 아키텍처 다이어그램

```
┌──────────────────────────────────┐
│           사용자 브라우저            │
│        - 정적 프론트엔드 접근         │
└────────────────┬─────────────────┘
                 │
         [정적 파일 요청]
                 ▼
       ┌────────────────────┐
       │ 정적 호스팅           │
       └────────────────────┘
                 │
         [API 요청 발생]
                 ▼
┌────────────────────────────────────────────────────────────┐
│                 Kubernetes 클러스터 (운영)                    │
│                                                            │
│  ┌──────────────┐       ┌───────────────────────┐          │
│  │ Ingress      │──────▶│ Backend Service       │          │
│  └──────────────┘       └──────────┬────────────┘          │
│                                    ▼                       │
│                           ┌─────────────────────┐          │
│                           │ Backend Pods        │          │
│                           └─────────────────────┘          │
│                                    │                       │
│                       ┌────────────▼────────────┐          │
│                       │ 로그 수집기 (DaemonSet)    │          │
│                       │ (Promtail / Fluent Bit) │          │
│                       └─────────────────────────┘          │
│                                                            │
│  ┌──────────────────────────┐   ┌────────────────────────┐ │
│  │ Prometheus (모니터링 수집)   │   │ Grafana (시각화)        │ │
│  └──────────────────────────┘   └────────────────────────┘ │
└────────────────────────────────────────────────────────────┘
         ▲         ▲
         │         │
         │         └──────┐
         │                ▼
         │      ┌────────────────────┐
         │      │ 외부 로그 저장소       │
         │      │ (Loki / Elastic 등) │
         │      └────────────────────┘
         │
         └────────────┐
                      ▼
         ┌──────────────────────────────┐
         │     외부 DB 서버 (RDS 등)       │
         │ - SQL 저장소                   │
         │ - Exporter → Prometheus 전달  │
         └──────────────────────────────┘

┌────────────────────────────────────────────────────────────┐
│                외부 CI/CD 시스템                              │
│                                                            │
│  ┌──────────────┐       ┌──────────────────────────────┐   │
│  │ GitHub/GitLab│──────▶│ GitOps Repo (Helm/Manifests) │   │
│  └──────────────┘       └────────┬─────────────────────┘   │
│                                  ▼                         │
│                        ┌────────────────────────┐          │
│                        │ CD 시스템 (ArgoCD 등)    │────▶     │
│                        └────────────────────────┘          │
│                             (클러스터 내부와 연결됨)             │
└────────────────────────────────────────────────────────────┘
```

<br>

## 2. 전체 시스템 구성 흐름도

```
[개발자]
   │
   └── git push
         │
         ▼
[Git Repository (코드 & Helm)]
   │
   └── CI 시스템 (GitHub Actions / Jenkins 등)
         ├─ 프론트 빌드 → 정적 파일 → Cloudflare 업로드
         ├─ 백엔드 빌드 → Docker 이미지 생성 → Registry 푸시
         └─ GitOps 리포 업데이트 (Helm values 수정 등)
                 │
                 ▼
[CD 시스템 (ArgoCD / Flux)]
   └── GitOps Repo 감시
         └── 변경 감지 → Kubernetes 클러스터에 배포 적용
                 │
                 ▼

┌────────────────────────────────────────────────────┐
│            Kubernetes 클러스터 (운영 환경)              │
│                                                    │
│  [Ingress Controller]                              │
│        │                                           │
│        ▼                                           │
│  [Backend Service]                                 │
│        │                                           │
│        ▼                                           │
│  [Backend Pods (ReplicaSet)]                       │
│        │           │                               │
│        │           └──────▶ [외부 DB 요청]           │
│        │                                           │
│        └──────▶ 로그 출력 (stdout/stderr)            │
│                      │                             │
│                      ▼                             │
│         [로그 수집기 DaemonSet (모든 Node)]            │
│             (Promtail / Fluent Bit)                │
│                      │                             │
│                      ▼                             │
│            [외부 로그 저장소 (Loki / Elastic)]         │
│                                                    │
│  [Prometheus (모니터링)] ← Pod/Node 메트릭 수집         │
│          │                                         │
│          ▼                                         │
│  [Grafana] → 대시보드 시각화                           │
│                                                    │
│  [Alertmanager (선택)] → 슬랙/이메일 알림 전송           │
└────────────────────────────────────────────────────┘

[사용자 브라우저]
   └── 접속 → [정적 프론트엔드 (Cloudflare)]
                    └── API 요청 → [Ingress 경유 → Backend]
```
